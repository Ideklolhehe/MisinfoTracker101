{% extends "base.html" %}

{% block title %}Scan URL - Web Scraping{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row mb-4">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('web_scraping.dashboard') }}">Web Scraping</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Scan URL</li>
                </ol>
            </nav>
            <h1 class="mb-4">Scan URL for Content</h1>
            <p class="text-muted">Enter a URL to scan for content. The system will extract the text content, metadata, and key information from the page.</p>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">URL Scanner</h5>
                </div>
                <div class="card-body">
                    <form method="post" action="{{ url_for('web_scraping.scan') }}">
                        <div class="mb-3">
                            <label for="url" class="form-label">URL to scan</label>
                            <input type="url" class="form-control" id="url" name="url" placeholder="https://example.com" required>
                            <div class="form-text">Enter a complete URL including http:// or https://</div>
                        </div>
                        <div class="mb-3">
                            <label for="depth" class="form-label">Crawl Depth</label>
                            <select class="form-select" id="depth" name="depth">
                                <option value="1" selected>Single Page Only</option>
                                <option value="2">Follow Links (Depth 2)</option>
                                <option value="5">Deep Crawl (Depth 5)</option>
                                <option value="10">Comprehensive Crawl (Depth 10)</option>
                            </select>
                            <div class="form-text">
                                <strong>Single Page:</strong> Only the URL you enter will be processed<br>
                                <strong>Follow Links:</strong> Links on the main page will also be processed<br>
                                <strong>Deep Crawl:</strong> Links on linked pages will also be processed (slower)<br>
                                <strong>Comprehensive:</strong> Very deep crawl of the site (much slower)
                            </div>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">Scan URL</button>
                            <a href="{{ url_for('web_scraping.dashboard') }}" class="btn btn-outline-secondary">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Recently Scanned URLs</h5>
                </div>
                <div class="card-body">
                    <p>Your recent URL scans will appear here.</p>
                    <!-- This would ideally show recent scans from the user's session -->
                    <!-- For now, we just show a message -->
                    <p class="text-center text-muted">No recent scans found</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Help & Tips</h5>
                </div>
                <div class="card-body">
                    <h6>How URL Scanning Works</h6>
                    <p>The URL scanner uses advanced web scraping techniques to extract content from web pages. Here's what happens when you submit a URL:</p>
                    <ol>
                        <li>The system requests the URL and downloads the HTML content</li>
                        <li>Text content is extracted, removing advertisements, navigation, and other non-essential elements</li>
                        <li>Metadata (title, author, publication date, etc.) is identified</li>
                        <li>Keywords and topics are automatically extracted from the content</li>
                        <li>If crawl depth is greater than 1, links are followed to additional pages</li>
                    </ol>
                    
                    <h6>Best Practices</h6>
                    <ul>
                        <li>Start with a specific article or content page rather than a homepage</li>
                        <li>Use deeper crawls only when needed, as they take significantly longer</li>
                        <li>Respect copyright and terms of service for websites you scan</li>
                        <li>Content extracted is for analysis only, not republication</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}